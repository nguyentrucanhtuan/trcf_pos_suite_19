<odoo>
    <template id="expense_form_template">

        <xpath expr="//head" position="inside">
            <meta charset="utf-8"/>
            <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
            <title>Báo cáo Lãi lỗ</title>
            <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
            <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&amp;display=swap" rel="stylesheet"/>
            <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>
            <script>
                tailwind.config = {
                    darkMode: "class",
                    theme: {
                        extend: {
                            colors: {
                                primary: '#2563eb',
                                'primary-light': '#eff6ff',
                                'primary-dark': '#1e40af',
                                'background-light': '#f8fafc',
                                'background-dark': '#020617',
                                'text-light-primary': '#1e293b',
                                'text-light-secondary': '#64748b',
                                'text-dark-primary': '#f8fafc',
                                'text-dark-secondary': '#94a3b8',
                                'border-light': '#e2e8f0',
                                'border-dark': '#1e293b',
                            },
                            fontFamily: {
                                "display": ["Inter", "sans-serif"]
                            },
                            borderRadius: {
                                "DEFAULT": "0.5rem",
                                "lg": "0.75rem",
                                "xl": "1rem",
                                "full": "9999px"
                            },
                        },
                    },
                }
            </script>
            <style>
                body {
                    font-family: 'Inter', sans-serif;
                }
                .material-symbols-outlined {
                    font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
                }
            </style>
        </xpath>

        <xpath expr="//body" position="replace">

            <body class="font-display bg-background-light dark:bg-background-dark">
                <div class="flex min-h-screen relative">
                    <!-- Mobile Menu Button -->
                    <button id="mobile-menu-btn" class="md:hidden fixed top-4 left-4 z-50 p-2 bg-white dark:bg-slate-800 rounded-lg shadow-lg border border-gray-200 dark:border-slate-700">
                        <span class="material-symbols-outlined text-gray-700 dark:text-gray-300">menu</span>
                    </button>
                    
                    <!-- Mobile Overlay -->
                    <div id="mobile-overlay" class="hidden fixed inset-0 bg-black/50 z-30 md:hidden"></div>
                    
                    <!-- SideNavBar -->
                    <div id="sidebar-wrapper" class="hidden md:block fixed md:relative inset-y-0 left-0 z-40 transform -translate-x-full md:translate-x-0 transition-transform duration-300 ease-in-out">
                        <t t-call="trcf_fnb_inventory.sidebar_layout_template"/>
                    </div>

                    <!-- Main Content -->
                    <main class="flex-1 p-4 md:p-6 lg:p-8 pt-16 md:pt-4">
                        <div class="max-w-screen mx-auto">
                            <div class="mb-4 md:mb-6 lg:mb-8">
                                <p class="text-text-light-primary dark:text-text-dark-primary text-xl md:text-2xl lg:text-3xl font-bold leading-tight">Tạo Phiếu Chi Mới</p>
                                <p class="text-text-light-secondary dark:text-text-dark-secondary text-sm md:text-base font-normal leading-normal mt-1 md:mt-2">Điền các thông tin dưới đây để ghi nhận một khoản chi phí mới.</p>
                            </div>
                            <div t-if="error_message" class="mb-4 p-3 md:p-4 text-xs md:text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400" role="alert">
                                <span class="font-medium">Lỗi!</span> <t t-esc="error_message"/>
                            </div>
                            <div class="bg-white dark:bg-background-dark p-4 md:p-6 lg:p-8 rounded-lg md:rounded-xl shadow-sm border border-border-light dark:border-border-dark">
                            <form method="POST" action="/trcf_fnb_inventory/expense_add" class="space-y-4 md:space-y-6">
                                <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                                <label class="flex flex-col">
                                    <p class="text-text-light-primary dark:text-text-dark-primary text-xs md:text-sm font-medium leading-normal pb-1 md:pb-2">Loại chi phí</p>
                                    <select name="expense_category" class="form-select w-full rounded text-text-light-primary dark:text-text-dark-primary focus:outline-0 focus:ring-2 focus:ring-primary/50 border border-border-light dark:border-border-dark bg-background-light dark:bg-background-dark focus:border-primary/50 h-10 md:h-12 placeholder:text-text-light-secondary dark:placeholder:text-text-dark-secondary px-3 md:px-4 text-sm md:text-base font-normal leading-normal" required="required">
                                        <option disabled="" selected="" value="">Chọn loại chi phí</option>
                                        <t t-foreach="expense_categories" t-as="category">
                                            <option t-att-value="category.id"><t t-esc="category.name"/></option>
                                        </t>
                                    </select>
                                </label>
                                <label class="flex flex-col">
                                    <p class="text-text-light-primary dark:text-text-dark-primary text-xs md:text-sm font-medium leading-normal pb-1 md:pb-2">Tên chi phí</p>
                                    <input name="expense_name" class="form-input w-full rounded text-text-light-primary dark:text-text-dark-primary focus:outline-0 focus:ring-2 focus:ring-primary/50 border border-border-light dark:border-border-dark bg-background-light dark:bg-background-dark focus:border-primary/50 h-10 md:h-12 placeholder:text-text-light-secondary dark:placeholder:text-text-dark-secondary px-3 md:px-4 text-sm md:text-base font-normal leading-normal" placeholder="Ví dụ: Mua dao, thớt mới" type="text" />
                                </label>
                                <label class="flex flex-col">
                                    <p class="text-text-light-primary dark:text-text-dark-primary text-xs md:text-sm font-medium leading-normal pb-1 md:pb-2">Số tiền</p>
                                    <input name="expense_amount" class="form-input w-full rounded text-text-light-primary dark:text-text-dark-primary focus:outline-0 focus:ring-2 focus:ring-primary/50 border border-border-light dark:border-border-dark bg-background-light dark:bg-background-dark focus:border-primary/50 h-10 md:h-12 placeholder:text-text-light-secondary dark:placeholder:text-text-dark-secondary px-3 md:px-4 text-sm md:text-base font-normal leading-normal" placeholder="0 VND" type="number" />
                                </label>
                                <label class="flex flex-col">
                                    <p class="text-text-light-primary dark:text-text-dark-primary text-xs md:text-sm font-medium leading-normal pb-1 md:pb-2">Hình thức thanh toán</p>
                                    <select name="payment_method_id" class="form-select w-full rounded text-text-light-primary dark:text-text-dark-primary focus:outline-0 focus:ring-2 focus:ring-primary/50 border border-border-light dark:border-border-dark bg-background-light dark:bg-background-dark focus:border-primary/50 h-10 md:h-12 placeholder:text-text-light-secondary dark:placeholder:text-text-dark-secondary px-3 md:px-4 text-sm md:text-base font-normal leading-normal" required="required">
                                        <option disabled="" selected="" value="">Chọn hình thức thanh toán</option>
                                        <t t-foreach="payment_methods" t-as="pm">
                                            <option t-att-value="pm.id"><t t-esc="pm.name"/></option>
                                        </t>
                                    </select>
                                </label>
                                <div class="flex items-center justify-end gap-3 md:gap-4 pt-2 md:pt-4">
                                    <button class="flex min-w-[72px] md:min-w-[84px] cursor-pointer items-center justify-center overflow-hidden rounded h-9 md:h-11 px-4 md:px-6 bg-gray-200 dark:bg-gray-800 text-text-light-primary dark:text-text-dark-primary text-xs md:text-sm font-medium leading-normal hover:bg-gray-300 dark:hover:bg-gray-700" type="button">
                                        <span class="truncate">Hủy</span>
                                    </button>
                                    <button class="flex min-w-[72px] md:min-w-[84px] cursor-pointer items-center justify-center overflow-hidden rounded h-9 md:h-11 px-4 md:px-6 bg-primary text-white text-xs md:text-sm font-medium leading-normal hover:bg-primary-dark" type="submit">
                                        <span class="truncate">Lưu</span>
                                    </button>
                                </div>
                            </form>
                            </div>
                        </div>
                    </main>
                </div>
                
                <!-- Mobile Menu JavaScript -->
                <script>
                <![CDATA[
                    document.addEventListener('DOMContentLoaded', function() {
                        const menuBtn = document.getElementById('mobile-menu-btn');
                        const sidebar = document.getElementById('sidebar-wrapper');
                        const overlay = document.getElementById('mobile-overlay');
                        
                        if (menuBtn && sidebar && overlay) {
                            menuBtn.addEventListener('click', function() {
                                sidebar.classList.toggle('hidden');
                                sidebar.classList.toggle('translate-x-0');
                                overlay.classList.toggle('hidden');
                            });
                            
                            overlay.addEventListener('click', function() {
                                sidebar.classList.add('hidden');
                                sidebar.classList.remove('translate-x-0');
                                overlay.classList.add('hidden');
                            });
                        }
                    });
                ]]>
                </script>
            </body>
            
        </xpath>

    </template>
</odoo>